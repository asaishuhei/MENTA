## HTTPの歴史
- HTTPは1991年に登場して以降、昨日のバージョンアップを重ね、現在のWebサイトの閲覧では、1991年に規定されたHTTP/1.1が主流
- データ量はどんどん増加しており、更に高速化することを目的として『HTTP/2』が最近登場した

## HTTPメッセージ  
- クライアントとサーバー間でやり取りする際に使われるのが『HTTPメッセージ』と呼ばれるデータ形式。
- HTTPメッセージはブラウザからの要求である『HTTPリクエスト』とサーバーからの応答である『HTTPレスポンス』の2種類に分けることができる

## HTTPリクエスト
- HTTPリクエストは『リクエスト行』、『メッセージヘッダー』、『メッセージボディ』の3つに分けるこtができる
- リクエスト行ではWebサーバーに対して、どういった処理をしてほしいかという記述をする
- メッセージヘッダーではブラウザの種類やOSのバージョン、対応するデータ形式などの情報を記述する
- メッセージボディでは、Webページの文字記入欄などに入力したテキストデータをWebサーバーに送る目的で使用される、空の場合もある

## HTTPレスポンス
- HTTPレスポンスは『ステータス行』、『メッセージヘッダー』、『メッセージボディ』の3つに分けることができる
- ステータス行ではWebブラウザに処理の結果を伝える
- メッセージヘッダーではWebサーバーの種類や送信するデータの形式などを伝える
- メッセージボディにはHTMLや画像データが格納される

## HTTPメソッド
- HTTPリクエストを用いでサーバーに具体的な内容を伝えているのはHTTPリクエスト内に含まれる『HTTPメソッド』である
- HTTPメソッドはクライアントがサーバーに要求する処理の種類のことを表す
- Webサイトを閲覧する際に使われるHTTPメソッドは主に次の2つである
  - HTMLファイルや画像といったファイルを取得する際の『GET』メソッド
  - フォームに入力したパスワードといったデータを転送する『POST』メソッド
- Webサーバーに保管してあるコンテンツを書き換えることができる『PUT』と『DELETE』はWebサーバー側で使用制限しているのがほとんど

## POSTメソッドとGETメソッド
- GETメソッドはURLにユーザー名やパスワードが含まれるため、それらの上方が履歴に残ってしまう
- 個人情報をWebサーバーに送る際はPOSTメソッドが使われる

## ステータスコード
- HTTPレスポンス内でのHTTPリクエストに対するWebサーバー内での処理結果のことを『ステータスコード』という
- エラーコード『404』みたいなやつ、それぞれの番号に意味がある

## ステータスコードの分類
- 100台：処理継続中
- 200台：リクエストが正常に受理された
- 300台：WebサイトのURLが変更されている場合など
- 400台：クライアント側のエラー
- 500台：Webサーバー側のエラー、負荷などの影響で

## メッセージヘッダー
- HTTPリクエストとHTTPレスポンスはいずれも『メッセージヘッダー』を使うことでHTTPメッセージに関する詳細な情報をとが可能送信すとが可能
- メッセージヘッダーは複数の『ヘッダーフィールド』と呼ばれる行から成り立っている

## TCPによるデータ通信
-   TCPではまず、クライアントとサーバーがお互いに通信できるのかどうかを確認し、『コネクション』と呼ばれる通信回路を確立した上でデータのやり取りを行う
## コネクション
- コネクションの確立は以下の3回のやり取りで行われる
  - クライアントからサーバーに対して、接続を要求するためのSYNパケット 
  - 確認応答の『ACKパケット』：接続要求に対してサーバー側からACKパケットを送信することで、接続可能であることを伝える、同時にクライアントに対しての接続要求であるSYNパケットも送る
  - クライアントがサーバーに対してACKパケットを送信する
  
  ## HTTP/1.1
  - 前のバージョンは、サーバーからデータが引き渡された段階で、コネクションを閉じていたが。1.1ではコネクションを継続して利用する方式となった
  - 上記の機能をHTTPレスポンスはキープアライズと呼ぶ
  
  ## HTTPパイプライン
  - データやり取りの効率化のために1.1ではHTTPパイプラインという機能がサポートされている
  - HTTPパイプラインはHTTPレスポンスを待つことなく、次のリクエストを送信できる、これによって時間の短縮が実現する
  
  ## HTTPP/2
  - 2015年に正式に標準化
  - Googleが提案したSPDYというプロコトルがベースとなっている
  
  ## ストリームによる多重化
 - HTTP/1.1ではパイプラインという機能があったが、リクエストが来た順にレスポンスを返さなければならなかったが、HTTP/2では『エトリーム』によって仮想的な通信回路を複数生成し、高速で効率よく、データのやり取りができるようになった
 
 ## バイナリ形式」
 - HTTP1.1ではテキスト形式でデータのやり取りを行っていたが、これはバイナリ形式のデータをやり取りする場合は、いったんテキスト形式に変換しなければならなかったが、HTTP/2ではバイナリ形式のデータをそのままやり取りできる
 - これによってデータ変換に費やす時間とサーバーへの負担を軽減できる
 
 ## ヘッダー圧縮
 - HTTP/2では新たにヘッダー情報も圧縮することが可能となった
 - ヘッダー情報には重複したデータが多いため、差分のみを転送するといった圧縮方式『HPACK』を利用することでデータ量を削減できる
 
 ## サーバープッシュ
 - HTTP/2ではHTTPのリクエストをもとにサーバー側が必要なファイルを判別して、ブラウザからのリクエストなしに事前にサーバーから転送する。これをサーバープッシュという
 
 ## HTTPS
 - 驚異から大切なデータを守るのが『HTTPS』
 - HTTPの通信において、暗号化方式である『SSL』、『TLS』を利用することでWebサイトを安全に使うことができる
 
 ## HTTPSの安全性
 - 盗聴防止：万が一傍受されてもデータを暗号化することによって第三者からの頭頂を防ぐことができる
 - 改ざん防止：振込先の情報の改ざんなどを防ぐため、『メッセージダイジェスト』が利用される。サーバーが受け取ったハッシュ値を計算し、値が異なれば改ざんされたと分かる
 - なりすまし防止：Webサーバーに配置された『SSLサーバー証明書』と呼ばれる電子証明書を接続時に検証することによって、利用者の身元を確認することができる
 - 信頼された『認証局』以外のSSLサーバー証明書が利用されている場合は警告が出る
 
 ## SSL/TLSハンドシェイクの流れ
 SSL/TLSハンドシェイクはTCPコネクションが確立したあと、以下のようにして行われる
 １．暗号化方式の決定：ブラウザとサーバー、療法が利用可能な暗号化方式を決める必要がある。そんたメッセージダイジェストの方式も決定する
 ２．通信相手の証明：通信している相手であるサーバーが正しい相手なのかどうかをSSLサーバー証明書により確認する
 ３．鍵の交換：鍵はデータを転送する際の暗号化、暗号化されたデータの復号の際に利用される
 ４．暗号化方式の確認：実際に利用する酸豪華方式の確認を行う。
 ### これらのやり取りをSSL/TLSハンドシェイクと呼ぶ
 
 ## ステートフルとステートレス
 - 直前のやり取りをした相手を、以降のやり取りでも覚えていることをステートフル、毎回リセットするものをステーロレスという
 - ステートフルのほうが便利そうだが、複数のクライアントとやり取りする際に、サーバーへの負担が大きくなってしまう
 - しかし、Webが進化するにつれてステートレスだけでは困ることが増えた、例えばショッピングサイトのカートのな中身の内容など
 
 ## Cookie『クッキー』
 - HTTPにはステートレスなプロコトルであるため、やり取りの状態を保存し、管理する仕組みがないので、ショッピングサイトなどで状態を保存し、管理するためにCookieが使われる
 - WebサーバーではHTTPレスポンスに『Set-Cookie』ヘッダーを含めることでCookieを送信できる
 - WebブラウザはHTTPリクエストに『Cookie』ヘッダーを含めることで送信できる。
 - 有効期限が設定されていないCookieはWebブラウザが削除されると同時に削除される。このようなCookieを『セッション　Cookie』と呼ぶ
 - 一方、有効期限が設定されているCookieは、Webブラウザに残るが、情報を盗まれやすいのでショッピングサイトなどではセッションCookieがよく利用される
 
 ## セッション
 - 『商品を選ぶ』→『商品をかごに入れる』→『かごを確認する』→『商品購入』といった一連の関連性のある処理の流れを『セッション』と呼ぶ
 - 一連の処理『セッション』として管理したい場合は、Cookieを用いて管理できる
 - セッション管理においてWebブラウザを識別するための情報をセッションIDと呼ぶ
 - セッションIDはサーバーで生成され、Cookieに含めてブラウザに送信され、ブラウザは次回以降、CookieにセッションIDを含めて処理を行うことでWebサーバーとのセッションを維持できる
 
 ## URI
 - URIは情報やデータなどを識別するためのもの、URLは存在する場所
 - URIの例『//df.com/news/index.html』
 - URIのうち、場所は問わず、名前を示すものをURNという
 - URIはHTTPリクエストのリクエスト行のメソッドに続いて記述され、『リクエストURI』とも呼ばれる
 - リクエストURIには２種類ある。それはURIすべて含む『絶対URI』と一分を含む『そうたいURI』である。通常は相対URIが使われる
 - URIには『予約文字』と『非予約文字』が存在する。それらの文字を使わない場合は『パーセントエンコーディング』と呼ばれる手法を用いて文字を変換する必要がある
 
